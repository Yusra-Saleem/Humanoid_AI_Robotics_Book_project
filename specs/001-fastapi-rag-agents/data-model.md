# Data Model: Integrated FastAPI RAG Service and Claude Agent System

**Feature Branch**: `001-fastapi-rag-agents`
**Created**: 2025-11-29
**Source**: Feature specification from `specs/001-fastapi-rag-agents/spec.md`

## Entities

### User

**Description**: Represents a user of the system, enabling authentication and personalization. Stored in Neon Serverless Postgres.

**Attributes**:
- `id`: UUID (Primary Key, auto-generated)
- `email`: VARCHAR(255) (Unique, Not Null)
- `password_hash`: VARCHAR(255) (Not Null, stores hashed password from Better-Auth)
- `software_background`: TEXT (Nullable, free-form text for user's software experience)
- `hardware_background`: TEXT (Nullable, free-form text for user's hardware experience)
- `created_at`: TIMESTAMP WITH TIME ZONE (Default CURRENT_TIMESTAMP)
- `updated_at`: TIMESTAMP WITH TIME ZONE (Default CURRENT_TIMESTAMP)

**Relationships**: None directly within this service, but linked to authentication via Better-Auth.

### Text Chunk

**Description**: A semantically meaningful piece of text extracted from the textbook content, used for RAG retrieval. Stored in Qdrant Cloud Free Tier.

**Attributes**:
- `content`: TEXT (The actual text snippet)
- `source_file`: VARCHAR(255) (Path to the original MDX file)
- `unique_id`: VARCHAR(255) (Unique identifier for the chunk, potentially derived from content hash or file path + offset)
- `vector_embedding`: FLOAT[] (The high-dimensional vector representation of the content, generated by Gemini API)

**Relationships**: None.

### Chapter

**Description**: A logical unit of the textbook content that can be personalized or translated. Its content is dynamically processed.

**Attributes**:
- `original_content`: TEXT (The full original markdown content of the chapter)
- `title`: VARCHAR(255)
- `path`: VARCHAR(255) (File path or identifier)

**Relationships**: Can be associated with `User` for personalization (not directly stored as a foreign key, but `user_id` is passed to the personalization endpoint).
